<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إدارة الصلاحيات</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/mobile-additions.css">
    <link rel="stylesheet" href="../../css/size-fixes.css">
    <link rel="stylesheet" href="../css/permissions/view-permissions.css">
    <link rel="stylesheet" href="../../css/unified-styles.css">
    <link rel="stylesheet" href="../../css/design-enhancements.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Main Content -->
        <main class="main-content">
            <div class="permissions-card">
            <!-- Header Section -->
            <div class="card-header">
                <h1 class="card-title">إدارة الصلاحيات</h1>
                <button class="add-btn">
                    <i class="fas fa-plus"></i>
                    <span>إضافة صلاحية</span>
                </button>
            </div>
            
            <!-- Permissions Table -->
            <table class="permissions-table">
                <thead>
                    <tr>
                        <th class="sequence-cell">الرقم التسلسلي</th>
                        <th>الاسم</th>
                        <th>الاسم العربي</th>
                        <th>تعديل</th>
                        <th>حذف</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="sequence-cell">١</td>
                        <td>LOGIN1</td>
                        <td>تسجيل الدخول</td>
                        <td class="action-cell">
                            <button class="action-btn edit-btn">
                                <i class="fas fa-pen"></i>
                            </button>
                        </td>
                        <td class="action-cell">
                            <button class="action-btn delete-btn">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td class="sequence-cell">٢</td>
                        <td>VIEW_DASHBOARD</td>
                        <td>عرض لوحة التحكم</td>
                        <td class="action-cell">
                            <button class="action-btn edit-btn">
                                <i class="fas fa-pen"></i>
                            </button>
                        </td>
                        <td class="action-cell">
                            <button class="action-btn delete-btn">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td class="sequence-cell">٣</td>
                        <td>MANAGE_USERS</td>
                        <td>إدارة المستخدمين</td>
                        <td class="action-cell">
                            <button class="action-btn edit-btn">
                                <i class="fas fa-pen"></i>
                            </button>
                        </td>
                        <td class="action-cell">
                            <button class="action-btn delete-btn">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td class="sequence-cell">٤</td>
                        <td>EDIT_SETTINGS</td>
                        <td>تعديل الإعدادات</td>
                        <td class="action-cell">
                            <button class="action-btn edit-btn">
                                <i class="fas fa-pen"></i>
                            </button>
                        </td>
                        <td class="action-cell">
                            <button class="action-btn delete-btn">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td class="sequence-cell">٥</td>
                        <td>VIEW_REPORTS</td>
                        <td>عرض التقارير</td>
                        <td class="action-cell">
                            <button class="action-btn edit-btn">
                                <i class="fas fa-pen"></i>
                            </button>
                        </td>
                        <td class="action-cell">
                            <button class="action-btn delete-btn">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td class="sequence-cell">٦</td>
                        <td>EXPORT_DATA</td>
                        <td>تصدير البيانات</td>
                        <td class="action-cell">
                            <button class="action-btn edit-btn">
                                <i class="fas fa-pen"></i>
                            </button>
                        </td>
                        <td class="action-cell">
                            <button class="action-btn delete-btn">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td class="sequence-cell">٧</td>
                        <td>MANAGE_ROLES</td>
                        <td>إدارة الأدوار</td>
                        <td class="action-cell">
                            <button class="action-btn edit-btn">
                                <i class="fas fa-pen"></i>
                            </button>
                        </td>
                        <td class="action-cell">
                            <button class="action-btn delete-btn">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td class="sequence-cell">٨</td>
                        <td>SYSTEM_BACKUP</td>
                        <td>نسخ احتياطي للنظام</td>
                        <td class="action-cell">
                            <button class="action-btn edit-btn">
                                <i class="fas fa-pen"></i>
                            </button>
                        </td>
                        <td class="action-cell">
                            <button class="action-btn delete-btn">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td class="sequence-cell">٩</td>
                        <td>API_ACCESS</td>
                        <td>الوصول إلى API واجهة برمجة التطبيقات</td>
                        <td class="action-cell">
                            <button class="action-btn edit-btn">
                                <i class="fas fa-pen"></i>
                            </button>
                        </td>
                        <td class="action-cell">
                            <button class="action-btn delete-btn">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td class="sequence-cell">١٠</td>
                        <td>AUDIT_LOGS</td>
                        <td>سجلات التدقيق</td>
                        <td class="action-cell">
                            <button class="action-btn edit-btn">
                                <i class="fas fa-pen"></i>
                            </button>
                        </td>
                        <td class="action-cell">
                            <button class="action-btn delete-btn">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <!-- Pagination Controls -->
            <div class="pagination-controls">
                <div class="page-info">
                    <div class="display-count">
                        <span>عرض</span>
                        <select>
                            <option>10</option>
                            <option>25</option>
                            <option>50</option>
                            <option>100</option>
                        </select>
                    </div>
                    
                    <div class="jump-to-page">
                        <span>اذهب إلى صفحة</span>
                        <input type="number" min="1" value="1">
                    </div>
                </div>
                
                <div class="pagination-numbers">
                    <a href="#" class="page-item page-arrow"><i class="fas fa-chevron-right"></i></a>
                    <a href="#" class="page-item">٣</a>
                    <a href="#" class="page-item">٢</a>
                    <a href="#" class="page-item active">١</a>
                    <a href="#" class="page-item page-arrow"><i class="fas fa-chevron-left"></i></a>
                </div>
            </div>
            </div>
        </main>
    </div>
    
    <script src="../js/jquery.min.js"></script>
    <script src="../../js/template-loader.js"></script>
    <script>
        $(document).ready(function() {
            // Add Permission Button
            $('.add-btn').on('click', function() {
                window.location.href = 'permissions-add-edit.html';
            });
            
            // Edit Button
            $('.edit-btn').on('click', function() {
                const row = $(this).closest('tr');
                const permissionName = row.find('td:nth-child(2)').text();
                window.location.href = `permissions-add-edit.html?edit=${permissionName}`;
            });
            
            // Delete Button
            $('.delete-btn').on('click', function() {
                const row = $(this).closest('tr');
                const permissionName = row.find('td:nth-child(2)').text();
                if (confirm(`هل أنت متأكد من رغبتك في حذف صلاحية "${permissionName}"؟`)) {
                    // Delete logic would go here
                    console.log(`Deleting permission: ${permissionName}`);
                    row.remove();
                }
            });
            
            // Pagination
            $('.page-item').on('click', function(e) {
                e.preventDefault();
                $('.page-item').removeClass('active');
                if (!$(this).hasClass('page-arrow')) {
                    $(this).addClass('active');
                }
                // Logic for page change would go here
            });
            
            // Display Count Change
            $('.display-count select').on('change', function() {
                // Logic for changing items per page would go here
                console.log(`Items per page: ${$(this).val()}`);
            });
            
            // Jump to Page
            $('.jump-to-page input').on('keyup', function(e) {
                if (e.key === 'Enter') {
                    const page = $(this).val();
                    // Logic for jumping to specific page would go here
                    console.log(`Jump to page: ${page}`);
                }
            });
        });
    </script>
    <script>
        // Mark this page as active in the menu
        document.addEventListener('DOMContentLoaded', function() {
            // This will be called after template-loader.js has loaded the templates
            setTimeout(function() {
                // Mark active items in sidebar and navigation
                const permissionsLinks = document.querySelectorAll('a[href*="permissions-view-new.html"]');
                permissionsLinks.forEach(link => {
                    const parentLi = link.closest('li');
                    if (parentLi) {
                        parentLi.classList.add('active');
                    }
                    
                    // If this is in a dropdown, open the parent dropdown
                    const parentDropdown = link.closest('.menu-item-has-children');
                    if (parentDropdown) {
                        parentDropdown.classList.add('open');
                        const subMenu = parentDropdown.querySelector('.sub-menu');
                        if (subMenu) {
                            subMenu.style.maxHeight = subMenu.scrollHeight + 'px';
                        }
                    }
                });
                
                // Fix add button link
                document.querySelector('.add-btn').addEventListener('click', function() {
                    window.location.href = 'permissions-add-edit-new.html';
                });
                
                // Fix edit buttons links
                document.querySelectorAll('.edit-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const row = this.closest('tr');
                        const permissionName = row.querySelector('td:nth-child(2)').textContent;
                        window.location.href = `permissions-add-edit-new.html?edit=${permissionName}`;
                    });
                });
            }, 500); // Small delay to ensure templates are loaded
        });
    </script>
</body>
</html>
