<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سجل الزوار | مفاتيح المملكة</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../css/new-dashboard.css">
    <style>
        /* Estilos específicos de la página de visitantes */
        .messages-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .messages-table th {
            background-color: #1a2653;
            color: white;
            font-weight: 500;
            padding: 12px;
            text-align: right;
            font-size: 14px;
        }
        
        .messages-table td {
            padding: 15px 12px;
            vertical-align: middle;
            border-bottom: 1px solid #eee;
            font-size: 14px;
        }
        
        .messages-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .messages-table tr:hover {
            background-color: #f0f4f8;
        }
        
        .status-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-open {
            background-color: #dcfce7;
            color: #166534;
        }
        
        .status-pending {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .status-closed {
            background-color: #fee2e2;
            color: #b91c1c;
        }
        
        .action-icons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .action-icon {
            font-size: 14px;
            cursor: pointer;
        }
        
        .icon-delete {
            color: #ef4444;
        }
        
        .icon-edit {
            color: #3b82f6;
        }
        
        .icon-reply {
            color: #6366f1;
        }
        
        .message-content {
            max-height: 60px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .show-more {
            color: #3b82f6;
            text-decoration: none;
            font-size: 12px;
            display: block;
            margin-top: 5px;
        }
        
        .tabs-area {
            display: flex;
            gap: 10px;
        }
        
        .tab-item {
            padding: 5px 15px;
            font-size: 14px;
            color: #555;
            text-decoration: none;
            border-radius: 20px;
            transition: all 0.2s;
        }
        
        .tab-item.active {
            background-color: #1e3a8a;
            color: white;
        }
        
        .page-title-area {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
    </style>
        
        .sidebar-menu .section-header {
            font-size: 0.8rem;
            padding: 10px 20px 5px;
            color: #868e96;
            font-weight: bold;
            text-transform: uppercase;
            margin-top: 15px;
            border-bottom: 1px solid #f1f1f1;
        }
        
        .sidebar-menu li:not(.section-header) {
            margin-bottom: 2px;
        }
        
        .sidebar-menu a {
            display: block;
            padding: 10px 20px;
            color: #555;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .sidebar-menu a:hover {
            background-color: #f5f7fa;
            color: #1e3a8a;
        }
        
        .sidebar-menu i {
            margin-left: 10px;
            width: 20px;
            text-align: center;
        }
        
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1040;
        }
        
        .toggle-sidebar-btn {
            background: none;
            border: none;
            cursor: pointer;
            color: #1e3a8a;
            font-size: 18px;
            display: none;
        }
        
        /* للأجهزة المحمولة */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .sidebar-overlay.active {
                display: block;
            }
            
            .toggle-sidebar-btn {
                display: block;
            }
            
            .main-container {
                margin-right: 0;
                max-width: 100%;
            }
        }

        /* تعديل main-content لدعم القائمة الجانبية */
        .main-content {
            transition: all 0.3s ease;
            margin-right: 250px;
            width: calc(100% - 250px);
            padding: 20px;
        }
        
        @media (min-width: 993px) {
            .main-content.expanded {
                margin-right: 0;
                width: 100%;
            }
        }
        
        .main-container {
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin: 20px auto;
            max-width: 1200px;
            padding: 20px;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }
        
        /* أنماط شريط التنقل العلوي */
        .sub-nav {
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .sub-nav ul {
            display: flex;
            list-style: none;
            padding: 0;
            margin: 0;
            flex-wrap: wrap;
        }
        
        .sub-nav li {
            margin-left: 15px;
            margin-bottom: 5px;
        }
        
        .sub-nav a {
            display: flex;
            align-items: center;
            color: #555;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.2s;
        }
        
        .sub-nav li.active a {
            background-color: #1e3a8a;
            color: #fff;
        }
        
        .sub-nav a:hover {
            background-color: #f5f7fa;
            color: #1e3a8a;
        }
        
        .sub-nav li.active a:hover {
            background-color: #15296d;
            color: #fff;
        }
        
        .sub-nav i {
            margin-left: 8px;
        }

        .logo-area {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .logo-area img {
            height: 50px;
        }

        .logo-area .sub-title {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .user-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #555;
        }

        .search-box {
            position: relative;
            margin-right: 15px;
        }

        .search-box input {
            border: none;
            background-color: #f5f7fa;
            border-radius: 20px;
            padding: 8px 15px;
            padding-right: 35px;
            width: 250px;
            font-size: 14px;
        }

        .search-box i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #888;
        }

        .page-title-area {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: #333;
            margin-bottom: 0;
        }

        .actions-area {
            display: flex;
            gap: 10px;
        }

        .btn-primary {
            background-color: #2e4ead;
            border-color: #2e4ead;
        }

        .btn-outline-secondary {
            color: #6c757d;
            border-color: #6c757d;
        }

        .tabs-area {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .tab-item {
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            background-color: #fff;
            border: 1px solid #e9ecef;
        }

        .tab-item.active {
            background-color: #f8f9fa;
            border-color: #e9ecef;
            font-weight: 500;
        }

        .messages-table {
            width: 100%;
            border-collapse: collapse;
        }

        .messages-table th {
            background-color: #1a2653;
            color: white;
            font-weight: 500;
            padding: 12px;
            text-align: right;
            font-size: 14px;
        }

        .messages-table td {
            padding: 15px 12px;
            vertical-align: middle;
            border-bottom: 1px solid #eee;
            font-size: 14px;
        }

        .messages-table tr:nth-child(even) {
            background-color: #fafbfc;
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 500;
            display: inline-block;
        }

        .status-open {
            background-color: #e6f7ee;
            color: #22c55e;
        }

        .status-pending {
            background-color: #fff8e6;
            color: #f59e0b;
        }

        .message-content {
            max-width: 350px;
            line-height: 1.5;
        }

        .action-icons {
            display: flex;
            gap: 8px;
        }

        .action-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            cursor: pointer;
        }

        .icon-delete {
            color: #ef4444;
        }

        .icon-edit {
            color: #3b82f6;
        }

        .icon-reply {
            color: #6366f1;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
            gap: 5px;
        }

        .page-item {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 35px;
            height: 35px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            border: 1px solid #dee2e6;
        }

        .page-item.active {
            background-color: #2e4ead;
            color: white;
            border-color: #2e4ead;
        }

        .checkbox-container {
            width: 20px;
            height: 20px;
            position: relative;
            margin: 0 auto;
        }

        .checkbox-container input {
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .show-more {
            color: #2e4ead;
            text-decoration: none;
            font-size: 12px;
            display: block;
            margin-top: 5px;
        }
        
        /* custom styles to match the exact design */
        .message-row td {
            padding-top: 20px;
            padding-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container-fluid p-0">
        <!-- Sidebar overlay for mobile -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>
        
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <img src="../images/logo-icon.png" alt="مفاتيح المملكة" class="logo-icon">
                    <h3>مفاتيح المملكة</h3>
                </div>
                <button id="close-sidebar" class="close-btn">&times;</button>
            </div>
            
            <div class="sidebar-menu">
                <ul>
                    <li class="menu-item">
                        <a href="../../index.html">
                            <i class="fas fa-home"></i>
                            <span>لوحة التحكم</span>
                        </a>
                    </li>
                    <li class="menu-item active">
                        <a href="visitor-log.html">
                            <i class="fas fa-users"></i>
                            <span>سجل الزوار</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="user-profile.html">
                            <i class="fas fa-user"></i>
                            <span>إدارة المستخدمين</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="content-view.html">
                            <i class="fas fa-file-alt"></i>
                            <span>إدارة المحتوى</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="advertisements-banners.html">
                            <i class="fas fa-ad"></i>
                            <span>الإعلانات</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="print-copy-report.html">
                            <i class="fas fa-chart-pie"></i>
                            <span>التقارير</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="general-settings.html">
                            <i class="fas fa-cog"></i>
                            <span>الإعدادات</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="sitemap.html">
                            <i class="fas fa-sitemap"></i>
                            <span>خريطة الموقع</span>
                        </a>
                    </li>
                </ul>
            </div>
        </aside>
        
        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Top Navigation Bar -->
            <nav class="top-navbar">
                <div class="menu-toggle">
                    <button id="sidebar-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
                
                <div class="brand">
                    <img src="../images/logo-icon.png" alt="مفاتيح المملكة" class="logo-icon">
                    <span class="brand-name">مفاتيح المملكة</span>
                </div>
                
                <div class="user-menu">
                    <div class="notifications">
                        <a href="#" class="notification-icon">
                            <i class="fas fa-bell"></i>
                            <span class="badge">5</span>
                        </a>
                    </div>
                    <div class="user-profile">
                        <img src="../images/user-avatar.png" alt="صورة المستخدم" class="user-avatar">
                        <span class="user-name">أحمد محمد</span>
                    </div>
                </div>
            </nav>

            <!-- Main Content Container -->
            <div class="dashboard-container">
                <!-- Dashboard Header with Stats -->
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h2>سجل الزوار</h2>
                        <p>إدارة سجلات ورسائل الزوار</p>
                    </div>
                    
                    <!-- Stats Cards -->
                    <div class="stats-cards">
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3>48</h3>
                                <p>رسالة جديدة</p>
                            </div>
                            <div class="stat-icon blue">
                                <i class="fas fa-envelope"></i>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3>120</h3>
                                <p>إجمالي الرسائل</p>
                            </div>
                            <div class="stat-icon green">
                                <i class="fas fa-inbox"></i>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3>85%</h3>
                                <p>معدل الاستجابة</p>
                            </div>
                            <div class="stat-icon orange">
                                <i class="fas fa-chart-line"></i>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3>7</h3>
                                <p>رسائل بانتظار الرد</p>
                            </div>
                            <div class="stat-icon red">
                                <i class="fas fa-clock"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="action-buttons">
                    <a href="visitor-add-entry.html" class="btn add-btn">
                        <i class="fas fa-plus"></i>
                        <span>إضافة رسالة</span>
                    </a>
                    
                    <div class="filter-options">
                        <select class="filter-select">
                            <option>جميع الرسائل</option>
                            <option>رسائل جديدة</option>
                            <option>تم الرد</option>
                            <option>بانتظار الرد</option>
                        </select>
                        
                        <div class="search-container">
                            <input type="text" placeholder="بحث..." class="search-input">
                            <button class="search-btn"><i class="fas fa-search"></i></button>
                        </div>
                    </div>
                </div>

            <!-- Messages table -->
            <div class="table-responsive">
                <table class="messages-table">
                    <thead>
                        <tr>
                            <th style="width: 40px">
                                <label class="checkbox-container">
                                    <input type="checkbox" id="select-all">
                                </label>
                            </th>
                            <th style="width: 80px">معرف</th>
                            <th style="width: 120px">الاسم</th>
                            <th style="width: 120px">البريد الإلكتروني</th>
                            <th>الرسالة</th>
                            <th style="width: 100px">الحالة</th>
                            <th style="width: 100px">الرد</th>
                            <th style="width: 120px">الإجراءات</th>
                        </tr>
                    </thead>
                <tbody>
                    <tr class="message-row">
                        <td>
                            <input type="checkbox" class="form-check-input">
                        </td>
                        <td>#1254</td>
                        <td>سارة الأحمد</td>
                        <td>
                            <a href="mailto:sara@example.com">sara@example.com</a>
                        </td>
                        <td>
                            <div>
                                يرجى الرد على الخدمة المطلوبة في منشوراتكم
                                لدي استفسارات للزيارة العائلية في مدينة مكة
                                سرعة الرد وان التواصل معكم مهم للغاية
                            </div>
                            <a href="#" class="show-more">عرض المزيد</a>
                        </td>
                        <td>
                            <span class="status-badge status-open">مفتوح</span>
                        </td>
                        <td>
                            <span class="status-badge status-open">تم الرد</span>
                        </td>
                        <td>
                            <div class="action-icons">
                                <a href="javascript:void(0)" onclick="handleMessageAction('delete', this)" class="action-icon icon-delete">
                                    <i class="fas fa-trash"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('edit', this)" class="action-icon icon-edit">
                                    <i class="fas fa-pen"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('reply', this)" class="action-icon icon-reply">
                                    <i class="fas fa-reply"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label class="checkbox-container">
                                <input type="checkbox">
                                <span class="checkmark"></span>
                            </label>
                        </td>
                        <td>
                            <div class="user-id">#1252</div>
                        </td>
                        <td>
                            <div class="user-name">فاطمة الزهراء</div>
                        </td>
                        <td>
                            <a href="mailto:fatima@example.com" class="email">fatima@example.com</a>
                        </td>
                        <td>
                            <div class="message-content">
                                أنا مهتمة بالاشتراك في خدمتكم المميزة، ولكن لدي
                                بعض الأسئلة قبل اتخاذ القرار. هل يمكنني الحصول
                                على فترة تجريبية مجانية؟ وما هي المميزات التي...
                            </div>
                            <a href="#" class="show-more">عرض المزيد</a>
                        </td>
                        <td>
                            <span class="status-badge status-open">مفتوح</span>
                        </td>
                        <td>
                            <span class="status-badge status-open">تم الرد</span>
                        </td>
                        <td>
                            <div class="action-icons">
                                <a href="#" class="action-icon icon-delete">
                                    <i class="fas fa-trash"></i>
                                </a>
                                <a href="#" class="action-icon icon-edit">
                                    <i class="fas fa-pen"></i>
                                </a>
                                <a href="#" class="action-icon icon-reply">
                                    <i class="fas fa-reply"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    <tr class="message-row">
                        <td>
                            <input type="checkbox" class="form-check-input">
                        </td>
                        <td>#1250</td>
                        <td>نورة السعيد</td>
                        <td>
                            <a href="mailto:noura@example.com">noura@example.com</a>
                        </td>
                        <td>
                            <div>
                                شكراً لتحسين خدماتكم. اعتقد أنه
                                من المفيد إضافة ميزة الدفع عبر المحفظة
                                حيث أن العديد من العملاء يتعاملون هذه...
                            </div>
                            <a href="#" class="show-more">عرض المزيد</a>
                        </td>
                        <td>
                            <span class="status-badge status-open">مفتوح</span>
                        </td>
                        <td>
                            <span class="status-badge status-open">تم الرد</span>
                        </td>
                        <td>
                            <div class="action-icons">
                                <a href="javascript:void(0)" onclick="handleMessageAction('delete', this)" class="action-icon icon-delete">
                                    <i class="fas fa-trash"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('edit', this)" class="action-icon icon-edit">
                                    <i class="fas fa-pen"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('reply', this)" class="action-icon icon-reply">
                                    <i class="fas fa-reply"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label class="checkbox-container">
                                <input type="checkbox">
                                <span class="checkmark"></span>
                            </label>
                        </td>
                        <td>
                            <div class="user-id">#1249</div>
                        </td>
                        <td>
                            <div class="user-name">خالد المنصور</div>
                        </td>
                    <tr class="message-row">
                        <td>
                            <input type="checkbox" class="form-check-input">
                        </td>
                        <td>#1249</td>
                        <td>خالد المنصور</td>
                        <td>
                            <a href="mailto:khalid@example.com">khalid@example.com</a>
                        </td>
                        <td>
                            <div>
                                بمعرفة مواعيد العمل خلال شهر رمضان.
                                هل ستطبق هناك تغييرات في أوقات
                                العمل؟ ستبقى دون عوائق خاصة بمناسبة...
                            </div>
                            <a href="#" class="show-more">عرض المزيد</a>
                        </td>
                        <td>
                            <span class="status-badge status-pending">بانتظار الرد</span>
                        </td>
                        <td>
                            <span class="status-badge status-pending">قيد التنفيذ</span>
                        </td>
                        <td>
                            <div class="action-icons">
                                <a href="javascript:void(0)" onclick="handleMessageAction('delete', this)" class="action-icon icon-delete">
                                    <i class="fas fa-trash"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('edit', this)" class="action-icon icon-edit">
                                    <i class="fas fa-pen"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('reply', this)" class="action-icon icon-reply">
                                    <i class="fas fa-reply"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    <tr class="message-row">
                        <td>
                            <input type="checkbox" class="form-check-input">
                        </td>
                        <td>#1252</td>
                        <td>فاطمة الزهراء</td>
                        <td>
                            <a href="mailto:fatima@example.com">fatima@example.com</a>
                        </td>
                        <td>
                            <div>
                                اني مهتمة بالمشاركة في مخيمكم التدريبي ولكن لدي
                                بعض الاسئلة: هل يجب علي دفع كامل المبلغ المطلوب
                                قبل الدخول؟ والى كم المساحات التي
                            </div>
                            <a href="#" class="show-more">عرض المزيد</a>
                        </td>
                        <td>
                            <span class="status-badge status-open">مفتوح</span>
                        </td>
                        <td>
                            <span class="status-badge status-open">تم الرد</span>
                        </td>
                        <td>
                            <div class="action-icons">
                                <a href="javascript:void(0)" onclick="handleMessageAction('delete', this)" class="action-icon icon-delete">
                                    <i class="fas fa-trash"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('edit', this)" class="action-icon icon-edit">
                                    <i class="fas fa-pen"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('reply', this)" class="action-icon icon-reply">
                                    <i class="fas fa-reply"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    <tr class="message-row">
                        <td>
                            <input type="checkbox" class="form-check-input">
                        </td>
                        <td>#1251</td>
                        <td>عمر الخالدي</td>
                        <td>
                            <a href="mailto:omar@example.com">omar@example.com</a>
                        </td>
                        <td>
                            <div>
                                قمت بالتسجيل للدخول إلى حسابي لكن
                                لا استطيع تغيير كلمة المرور وايضا انا لا
                                اتذكر كلمتي الحالية هل يمكنكم مساعدتي
                            </div>
                            <a href="#" class="show-more">عرض المزيد</a>
                        </td>
                        <td>
                            <span class="status-badge status-open">مفتوح</span>
                        </td>
                        <td>
                            <span class="status-badge status-open">تم الرد</span>
                        </td>
                        <td>
                            <div class="action-icons">
                                <a href="javascript:void(0)" onclick="handleMessageAction('delete', this)" class="action-icon icon-delete">
                                    <i class="fas fa-trash"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('edit', this)" class="action-icon icon-edit">
                                    <i class="fas fa-pen"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('reply', this)" class="action-icon icon-reply">
                                    <i class="fas fa-reply"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    <tr class="message-row">
                        <td>
                            <input type="checkbox" class="form-check-input">
                        </td>
                        <td>#1250</td>
                        <td>نورا السعيدي</td>
                        <td>
                            <a href="mailto:noura@example.com">noura@example.com</a>
                        </td>
                        <td>
                            <div>
                                ارغب بمعرفة اسعار الدورات التدريبية المقامة معكم
                                + طريقة الدفع المتاحة لديكم وحالة توفر مقاعد
                                + يجب ان اعرف اذا الملف سيتضمن فقط
                            </div>
                            <a href="#" class="show-more">عرض المزيد</a>
                        </td>
                        <td>
                            <span class="status-badge status-pending">بانتظار الرد</span>
                        </td>
                        <td>
                            <span class="status-badge status-pending">قيد التنفيذ</span>
                        </td>
                        <td>
                            <div class="action-icons">
                                <a href="javascript:void(0)" onclick="handleMessageAction('delete', this)" class="action-icon icon-delete">
                                    <i class="fas fa-trash"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('edit', this)" class="action-icon icon-edit">
                                    <i class="fas fa-pen"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('reply', this)" class="action-icon icon-reply">
                                    <i class="fas fa-reply"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    <tr class="message-row">
                        <td>
                            <input type="checkbox" class="form-check-input">
                        </td>
                        <td>#1249</td>
                        <td>خالد المنصور</td>
                        <td>
                            <a href="mailto:khalid@example.com">khalid@example.com</a>
                        </td>
                        <td>
                            <div>
                                مرحبا، نرجو منكم كامل تفاصيل ستقام ورشات العمل مثل
                                ما ستقدم منكم وكذلك إذا كان هناك أي توقيت
                                تستطيعون عرضها خاصة بالنسبة
                            </div>
                            <a href="#" class="show-more">عرض المزيد</a>
                        </td>
                        <td>
                            <span class="status-badge status-pending">بانتظار الرد</span>
                        </td>
                        <td>
                            <span class="status-badge status-pending">قيد التنفيذ</span>
                        </td>
                        <td>
                            <div class="action-icons">
                                <a href="javascript:void(0)" onclick="handleMessageAction('delete', this)" class="action-icon icon-delete">
                                    <i class="fas fa-trash"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('edit', this)" class="action-icon icon-edit">
                                    <i class="fas fa-pen"></i>
                                </a>
                                <a href="javascript:void(0)" onclick="handleMessageAction('reply', this)" class="action-icon icon-reply">
                                    <i class="fas fa-reply"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>

            <div>
                <button class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    <span>إضافة البيانات</span>
                </button>
                <button class="btn btn-outline-secondary ms-2">
                    <i class="fas fa-sync-alt"></i>
                    <span>تحديث الحالة</span>
                </button>
            </div>

            <!-- Table Section -->
            <div class="table-responsive mt-3">
                <table class="messages-table">
                    <thead>
                        <tr>
                            <th style="width: 40px">
                                <input type="checkbox" class="form-check-input">
                            </th>
                            <th>معرف</th>
                            <th>الاسم</th>
                            <th>البريد الإلكتروني</th>
                            <th>الرسالة</th>
                            <th>الحالة</th>
                            <th>الرد</th>
                            <th>الإجراءات</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Message 1 - سارة الأحمد -->
                        <tr>
                            <td>
                                <input type="checkbox" class="form-check-input">
                            </td>
                            <td>#1254</td>
                            <td>سارة الأحمد</td>
                            <td>
                                <a href="mailto:sara@example.com">sara@example.com</a>
                            </td>
                            <td>
                                <div>
                                    يرجى الرد على الخدمة المطلوبة في منشوراتكم
                                    لدي استفسارات للزيارة العائلية في مدينة مكة
                                    سرعة الرد وان التواصل معكم مهم للغاية
                                </div>
                                <a href="#" class="show-more">عرض المزيد</a>
                            </td>
                            <td>
                                <span class="status-badge status-open">مفتوح</span>
                            </td>
                            <td>
                                <span class="status-badge status-open">تم الرد</span>
                            </td>
                            <td>
                                <div class="action-icons">
                                    <a href="javascript:void(0)" onclick="handleMessageAction('delete', this)" class="action-icon icon-delete">
                                        <i class="fas fa-trash"></i>
                                    </a>
                                    <a href="javascript:void(0)" onclick="handleMessageAction('edit', this)" class="action-icon icon-edit">
                                        <i class="fas fa-pen"></i>
                                    </a>
                                    <a href="javascript:void(0)" onclick="handleMessageAction('reply', this)" class="action-icon icon-reply">
                                        <i class="fas fa-reply"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        <!-- Message 2 - محمد المعلمي -->
                        <tr>
                            <td>
                                <input type="checkbox" class="form-check-input">
                            </td>
                            <td>#1253</td>
                            <td>محمد المعلمي</td>
                            <td>
                                <a href="mailto:mohammed@example.com">mohammed@example.com</a>
                            </td>
                            <td>
                                <div>
                                    لدي استفسار بخصوص التسجيل الإلكتروني للخدمات الإدارية
                                    هل يمكنني اضافة اكثر من فرد باسم المستخدم الواحد؟
                                    وهل هي بنفسة الطريقة ام كيف اقوم بالربط؟
                                </div>
                                <a href="#" class="show-more">عرض المزيد</a>
                            </td>
                            <td>
                                <span class="status-badge status-pending">بانتظار الرد</span>
                            </td>
                            <td>
                                <span class="status-badge status-pending">قيد التنفيذ</span>
                            </td>
                            <td>
                                <div class="action-icons">
                                    <a href="javascript:void(0)" onclick="handleMessageAction('delete', this)" class="action-icon icon-delete">
                                        <i class="fas fa-trash"></i>
                                    </a>
                                    <a href="javascript:void(0)" onclick="handleMessageAction('edit', this)" class="action-icon icon-edit">
                                        <i class="fas fa-pen"></i>
                                    </a>
                                    <a href="javascript:void(0)" onclick="handleMessageAction('reply', this)" class="action-icon icon-reply">
                                        <i class="fas fa-reply"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        <!-- Message 3 - فاطمة الزهراء -->
                        <tr>
                            <td>
                                <input type="checkbox" class="form-check-input">
                            </td>
                            <td>#1252</td>
                            <td>فاطمة الزهراء</td>
                            <td>
                                <a href="mailto:fatima@example.com">fatima@example.com</a>
                            </td>
                            <td>
                                <div>
                                    اني مهتمة بالمشاركة في مخيمكم التدريبي ولكن لدي
                                    بعض الاسئلة: هل يجب علي دفع كامل المبلغ المطلوب
                                    قبل الدخول؟ والى كم المساحات التي
                                </div>
                                <a href="#" class="show-more">عرض المزيد</a>
                            </td>
                            <td>
                                <span class="status-badge status-open">مفتوح</span>
                            </td>
                            <td>
                                <span class="status-badge status-open">تم الرد</span>
                            </td>
                            <td>
                                <div class="action-icons">
                                    <a href="javascript:void(0)" onclick="handleMessageAction('delete', this)" class="action-icon icon-delete">
                                        <i class="fas fa-trash"></i>
                                    </a>
                                    <a href="javascript:void(0)" onclick="handleMessageAction('edit', this)" class="action-icon icon-edit">
                                        <i class="fas fa-pen"></i>
                                    </a>
                                    <a href="javascript:void(0)" onclick="handleMessageAction('reply', this)" class="action-icon icon-reply">
                                        <i class="fas fa-reply"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        <!-- Message 4 - عمر الخالدي -->
                        <tr>
                            <td>
                                <input type="checkbox" class="form-check-input">
                            </td>
                            <td>#1251</td>
                            <td>عمر الخالدي</td>
                            <td>
                                <a href="mailto:omar@example.com">omar@example.com</a>
                            </td>
                            <td>
                                <div>
                                    قمت بالتسجيل للدخول إلى حسابي لكن
                                    لا استطيع تغيير كلمة المرور وايضا انا لا
                                    اتذكر كلمتي الحالية هل يمكنكم مساعدتي
                                </div>
                                <a href="#" class="show-more">عرض المزيد</a>
                            </td>
                            <td>
                                <span class="status-badge status-open">مفتوح</span>
                            </td>
                            <td>
                                <span class="status-badge status-open">تم الرد</span>
                            </td>
                            <td>
                                <div class="action-icons">
                                    <a href="javascript:void(0)" onclick="handleMessageAction('delete', this)" class="action-icon icon-delete">
                                        <i class="fas fa-trash"></i>
                                    </a>
                                    <a href="javascript:void(0)" onclick="handleMessageAction('edit', this)" class="action-icon icon-edit">
                                        <i class="fas fa-pen"></i>
                                    </a>
                                    <a href="javascript:void(0)" onclick="handleMessageAction('reply', this)" class="action-icon icon-reply">
                                        <i class="fas fa-reply"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        <!-- Message 5 - نورا السعيدي -->
                        <tr>
                            <td>
                                <input type="checkbox" class="form-check-input">
                            </td>
                            <td>#1250</td>
                            <td>نورا السعيدي</td>
                            <td>
                                <a href="mailto:noura@example.com">noura@example.com</a>
                            </td>
                            <td>
                                <div>
                                    ارغب بمعرفة اسعار الدورات التدريبية المقامة معكم
                                    + طريقة الدفع المتاحة لديكم وحالة توفر مقاعد
                                    + يجب ان اعرف اذا الملف سيتضمن فقط
                                </div>
                                <a href="#" class="show-more">عرض المزيد</a>
                            </td>
                            <td>
                                <span class="status-badge status-pending">بانتظار الرد</span>
                            </td>
                            <td>
                                <span class="status-badge status-pending">قيد التنفيذ</span>
                            </td>
                            <td>
                                <div class="action-icons">
                                    <a href="javascript:void(0)" onclick="handleMessageAction('delete', this)" class="action-icon icon-delete">
                                        <i class="fas fa-trash"></i>
                                    </a>
                                    <a href="javascript:void(0)" onclick="handleMessageAction('edit', this)" class="action-icon icon-edit">
                                        <i class="fas fa-pen"></i>
                                    </a>
                                    <a href="javascript:void(0)" onclick="handleMessageAction('reply', this)" class="action-icon icon-reply">
                                        <i class="fas fa-reply"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        <!-- Message 6 - خالد المنصور -->
                        <tr>
                            <td>
                                <input type="checkbox" class="form-check-input">
                            </td>
                            <td>#1249</td>
                            <td>خالد المنصور</td>
                            <td>
                                <a href="mailto:khalid@example.com">khalid@example.com</a>
                            </td>
                            <td>
                                <div>
                                    مرحبا، نرجو منكم كامل تفاصيل ستقام ورشات العمل مثل
                                    ما ستقدم منكم وكذلك إذا كان هناك أي توقيت
                                    تستطيعون عرضها خاصة بالنسبة
                                </div>
                                <a href="#" class="show-more">عرض المزيد</a>
                            </td>
                            <td>
                                <span class="status-badge status-pending">بانتظار الرد</span>
                            </td>
                            <td>
                                <span class="status-badge status-pending">قيد التنفيذ</span>
                            </td>
                            <td>
                                <div class="action-icons">
                                    <a href="javascript:void(0)" onclick="handleMessageAction('delete', this)" class="action-icon icon-delete">
                                        <i class="fas fa-trash"></i>
                                    </a>
                                    <a href="javascript:void(0)" onclick="handleMessageAction('edit', this)" class="action-icon icon-edit">
                                        <i class="fas fa-pen"></i>
                                    </a>
                                    <a href="javascript:void(0)" onclick="handleMessageAction('reply', this)" class="action-icon icon-reply">
                                        <i class="fas fa-reply"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Pagination -->
            <div class="d-flex justify-content-between align-items-center mt-4">
                <div class="pagination">
                    <a href="#" onclick="navigateToPage('next')" class="page-item"><i class="fas fa-chevron-right"></i></a>
                    <a href="#" onclick="navigateToPage(5)" class="page-item">5</a>
                    <a href="#" onclick="navigateToPage(4)" class="page-item">4</a>
                    <a href="#" onclick="navigateToPage(3)" class="page-item">3</a>
                    <a href="#" onclick="navigateToPage(2)" class="page-item">2</a>
                    <a href="#" onclick="navigateToPage(1)" class="page-item active">1</a>
                    <a href="#" onclick="navigateToPage('prev')" class="page-item"><i class="fas fa-chevron-left"></i></a>
                </div>
                <div>
                    <span class="text-muted">عرض 1-6 من 28 رسالة</span>
                </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/jquery.min.js"></script>
    <script>
        // Function to handle page navigation
        function navigateTo(page) {
            window.location.href = page;
        }
        
        // Function to handle sidebar toggle
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            const sidebarOverlay = document.getElementById('sidebar-overlay');
            const mainContent = document.querySelector('.main-content');
            
            sidebar.classList.toggle('active');
            sidebarOverlay.classList.toggle('active');
            mainContent.classList.toggle('expanded');
        }
        
        // Function to handle pagination navigation
        function navigateToPage(pageNum) {
            // Current page url structure
            const baseUrl = 'visitor-log.html';
            
            // If it's a next/prev action, calculate the new page
            if (pageNum === 'next' || pageNum === 'prev') {
                const currentActive = $('.pagination .page-item.active').text();
                const currentPage = parseInt(currentActive) || 1;
                
                if (pageNum === 'next' && currentPage < 5) {
                    pageNum = currentPage + 1;
                } else if (pageNum === 'prev' && currentPage > 1) {
                    pageNum = currentPage - 1;
                } else {
                    // Stay on same page if at limits
                    return;
                }
            }
            
            // Update UI to show active page
            $('.pagination .page-item').removeClass('active');
            $(`.pagination .page-item:contains('${pageNum}')`).addClass('active');
            
            // In a real app, this would load new data for the page
            // For demo, just update the page counter
            updatePageCounter(pageNum);
        }
        
        // Update the page counter display
        function updatePageCounter(page) {
            let start, end;
            const total = 28; // Total messages
            const perPage = 6; // Messages per page
            
            start = ((page - 1) * perPage) + 1;
            end = Math.min(page * perPage, total);
            
            $('.text-muted').text(`عرض ${start}-${end} من ${total} رسالة`);
        }
        
        // Function to handle message actions
        function handleMessageAction(action, element) {
            // Get the parent row element
            const row = $(element).closest('tr');
            
            // Extract message data from the row
            const messageId = row.find('td:nth-child(2)').text().replace('#', '');
            const messageTitle = row.find('td:nth-child(3)').text();
            
            switch(action) {
                case 'delete':
                    if(confirm(`هل أنت متأكد من رغبتك في حذف الرسالة: ${messageTitle}؟`)) {
                        console.log(`تم حذف الرسالة: ${messageId}`);
                        // In a real app, this would send an API request
                        row.fadeOut(400, function() {
                            $(this).remove();
                            updateMessagesCount();
                        });
                    }
                    break;
                case 'edit':
                    window.location.href = `visitor-edit-entry.html?id=${messageId}`;
                    break;
                case 'reply':
                    window.location.href = `visitor-edit-entry.html?id=${messageId}&reply=true`;
                    break;
            }
        }
        
        // Function to toggle visibility of filter section
        function toggleFilters() {
            $('.filters-section').slideToggle(300);
        }
        
        // Function to update message status for selected messages
        function updateSelectedMessagesStatus() {
            const selectedRows = $('table input[type="checkbox"]:checked').closest('tr');
            if (selectedRows.length === 0) {
                alert('الرجاء تحديد رسالة واحدة على الأقل');
                return;
            }
            
            // Show status selection dialog (in a real app)
            const newStatus = prompt('اختر الحالة الجديدة (مفتوح, بانتظار الرد, مغلق)', 'مفتوح');
            
            if (newStatus) {
                // Update the status badge for selected rows
                selectedRows.each(function() {
                    const statusClass = newStatus === 'مفتوح' ? 'status-open' : 
                                      newStatus === 'بانتظار الرد' ? 'status-pending' : 'status-closed';
                                      
                    $(this).find('.status-badge').first().attr('class', `status-badge ${statusClass}`).text(newStatus);
                });
                
                alert(`تم تحديث حالة ${selectedRows.length} رسائل`);
            }
        }
        
        // Function to update message count in the tabs
        function updateMessagesCount() {
            const count = $('.messages-table tbody tr').length;
            $('.tab-item.active').text(`${count} رسالة`);
        }

        $(document).ready(function() {
            // Initialize the page
            updateMessagesCount();
            
            // Initialize sidebar functionality
            $('#header-toggle-sidebar').on('click', function() {
                toggleSidebar();
            });
            
            // Close sidebar when X button is clicked
            $('#close-sidebar').on('click', function() {
                toggleSidebar();
            });
            
            // Close sidebar when overlay is clicked
            $('#sidebar-overlay').on('click', function() {
                toggleSidebar();
            });
            
            // Select all checkbox functionality
            $('#select-all').on('change', function() {
                var isChecked = this.checked;
                $('table input[type="checkbox"]').each(function() {
                    $(this).prop('checked', isChecked);
                });
            });
            
            // Show more functionality
            $('.show-more').on('click', function(e) {
                e.preventDefault();
                const content = $(this).prev('div');
                const isExpanded = content.hasClass('expanded');
                
                if (!isExpanded) {
                    content.addClass('expanded');
                    content.css('max-height', 'none');
                    $(this).text('عرض أقل');
                } else {
                    content.removeClass('expanded');
                    content.css('max-height', '');
                    $(this).text('عرض المزيد');
                }
            });
            
            // Filter tabs
            $('.filter-tab').on('click', function() {
                $('.filter-tab').removeClass('active');
                $(this).addClass('active');
            });
            
            // Initialize sidebar navigation links
            $('.sidebar-link').on('click', function(e) {
                if ($(this).attr('href') === '#') {
                    e.preventDefault();
                    const target = $(this).data('target');
                    if (target) {
                        navigateTo(target);
                    }
                }
            });
            
            // Handle search form submission
            $('.search-box').on('submit', function(e) {
                e.preventDefault();
                const query = $(this).find('input').val().trim();
                if (query) {
                    // In a real app, this would perform the search
                    alert(`جاري البحث عن: ${query}`);
                }
            });
            
            // Search icon click handler
            $('.search-box i').on('click', function() {
                $(this).closest('form').submit();
            });
            
            // Enable form submission with Enter key
            $('.search-box input').on('keypress', function(e) {
                if (e.which === 13) {
                    e.preventDefault();
                    $(this).closest('form').submit();
                }
            });
            
            // Make table rows clickable
            $('.message-row').on('click', function(e) {
                // Skip if clicking on a checkbox or action button
                if ($(e.target).is('input[type="checkbox"]') || 
                    $(e.target).closest('.action-icons').length) {
                    return;
                }
                
                // Get message ID and navigate to detail page
                const messageId = $(this).find('td:nth-child(2)').text().replace('#', '');
                window.location.href = `visitor-edit-entry.html?id=${messageId}`;
            });
        });
    </script>
</body>
</html>
